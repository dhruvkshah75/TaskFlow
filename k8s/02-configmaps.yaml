# TaskFlow Kubernetes ConfigMaps 

---
# Main Application Configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: taskflow-app-config
  namespace: taskflow
data:
  ENVIRONMENT: "production"
  ALGORITHM: "HS256"
  ACCESS_TOKEN_EXPIRE_MINUTES: "60"
  RATE_LIMIT_PER_HOUR: "1000"
  USER_RATE_LIMIT_PER_HOUR: "500"
  MAX_FAILED_ATTEMPTS: "10"
  LOCKOUT_DURATION_SECONDS: "900"
  HEARTBEAT_INTERVAL_SECONDS: "30"
  WORKER_CONCURRENCY: "4"
  TASK_TIMEOUT_SECONDS: "300"
  MAX_TASK_RETRIES: "3"
  LOG_LEVEL: "INFO"
  LOG_FORMAT: "json"

---
# Database Configuration - Using PGBouncer
apiVersion: v1
kind: ConfigMap
metadata:
  name: taskflow-db-config
  namespace: taskflow
data:
  POSTGRES_DB: "taskflow_db"
  POSTGRES_USER: "postgres"
  
  POSTGRES_HOST: "taskflow-pgbouncer" 
  POSTGRES_PORT: "6432"
  
  POSTGRES_DIRECT_HOST: "postgres-internal"
  POSTGRES_DIRECT_PORT: "5432"

---
# Redis Configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: taskflow-redis-config
  namespace: taskflow
data:
  REDIS_HOST_HIGH: "redis-high"
  REDIS_PORT_HIGH: "6379"
  
  REDIS_HOST_LOW: "redis-low"
  REDIS_PORT_LOW: "6379"
  
  QUEUE_NAME: "default"
  PROCESSING_QUEUE_PREFIX: "processing"

---
# Worker Autoscaling Configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: taskflow-autoscaling-config
  namespace: taskflow
data:
  MIN_WORKERS: "2"
  MAX_WORKERS: "20"
  WORKER_TARGET_CPU_UTILIZATION: "70"
  WORKER_TARGET_MEMORY_UTILIZATION: "80"
  MIN_API_REPLICAS: "2"
  MAX_API_REPLICAS: "10"
  API_TARGET_CPU_UTILIZATION: "70"
  API_TARGET_MEMORY_UTILIZATION: "80"
  API_TARGET_REQUESTS_PER_SECOND: "100"
  QUEUE_LENGTH_THRESHOLD: "10"
  SCALE_UP_MESSAGES: "50"
  SCALE_DOWN_MESSAGES: "5"